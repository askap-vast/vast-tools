<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Python module to interact with ASKAP VAST data."><meta name=author content="VAST Development Team"><link rel=icon href=../../img/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-7.3.6"><title>Pipeline - VAST Tools</title><link rel=stylesheet href=../../assets/stylesheets/main.a57b2b03.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=stylesheet href=../../css/lightgallery.min.css><script src=../../js/lightgallery.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/_mkdocstrings.css><link rel=stylesheet href=../../theme/css/extra.css><link rel=stylesheet href=../../css/ansi-colours.css><link rel=stylesheet href=../../css/jupyter-cells.css><link rel=stylesheet href=../../css/pandas-dataframe.css><meta property=og:type content=website><meta property=og:title content="VAST Tools - Pipeline"><meta property=og:description content="Python module to interact with ASKAP VAST data."><meta property=og:url content=None></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary data-md-color-accent=indigo> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#pipeline class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class="md-banner md-announce"> <div class="md-banner__inner md-announce__inner md-grid md-typeset"> <style>
      .md-announce a,
      .md-announce a:focus,
      .md-announce a:hover{color:currentColor}.md-announce
      strong{white-space:nowrap}.md-announce}
  </style> <a href=../../changelog/ ><strong>Version 3.0.1 released!</strong> Includes access to all pilot survey data, full survey functionality, optimisation and more ðŸ™Œ Check the <strong>release notes! ðŸ‘€</strong></a> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="VAST Tools" class="md-header__button md-logo" aria-label="VAST Tools" data-md-component=logo> <img src=../../img/vast-logo.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> VAST Tools </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Pipeline </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary data-md-color-accent=blue aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/askap-vast/vast-tools title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> askap-vast/vast-tools </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting_started/introduction/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../mocs/ class="md-tabs__link md-tabs__link--active"> Components & Features </a> </li> <li class=md-tabs__item> <a href=../../notebook-examples/notebooks-overview/ class=md-tabs__link> Example Notebooks </a> </li> <li class=md-tabs__item> <a href=../../contributing/develop/ class=md-tabs__link> Contributing & Developing </a> </li> <li class=md-tabs__item> <a href=../../help_and_acknowledgements/ class=md-tabs__link> Help and Acknowledgements </a> </li> <li class=md-tabs__item> <a href=../../changelog/ class=md-tabs__link> Reference </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="VAST Tools" class="md-nav__button md-logo" aria-label="VAST Tools" data-md-component=logo> <img src=../../img/vast-logo.png alt=logo> </a> VAST Tools </label> <div class=md-nav__source> <a href=https://github.com/askap-vast/vast-tools title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> askap-vast/vast-tools </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Home </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting_started/introduction/ class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../getting_started/installation/ class=md-nav__link> Installation </a> </li> <li class=md-nav__item> <a href=../../getting_started/configuration/ class=md-nav__link> Configuration & Data Access </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Components & Features <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Components & Features" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Components & Features </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../mocs/ class=md-nav__link> MOCs </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Pipeline <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Pipeline </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-the-pipeline-component class=md-nav__link> Using the Pipeline Component </a> <nav class=md-nav aria-label="Using the Pipeline Component"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-pipeline-methods class=md-nav__link> Available Pipeline Methods </a> <nav class=md-nav aria-label="Available Pipeline Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list_images class=md-nav__link> list_images </a> </li> <li class=md-nav__item> <a href=#list_piperuns class=md-nav__link> list_piperuns </a> </li> <li class=md-nav__item> <a href=#load_run class=md-nav__link> load_run </a> </li> <li class=md-nav__item> <a href=#load_runs class=md-nav__link> load_runs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pipeanalysis-instances class=md-nav__link> PipeAnalysis Instances </a> </li> <li class=md-nav__item> <a href=#accessing-pipeanalysis-run-data class=md-nav__link> Accessing PipeAnalysis Run Data </a> </li> <li class=md-nav__item> <a href=#available-pipeanalysis-methods class=md-nav__link> Available PipeAnalysis Methods </a> <nav class=md-nav aria-label="Available PipeAnalysis Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#check_for_planets class=md-nav__link> check_for_planets </a> </li> <li class=md-nav__item> <a href=#combine_with_run class=md-nav__link> combine_with_run </a> </li> <li class=md-nav__item> <a href=#create_moc class=md-nav__link> create_moc </a> </li> <li class=md-nav__item> <a href=#filter_by_moc class=md-nav__link> filter_by_moc </a> </li> <li class=md-nav__item> <a href=#get_source class=md-nav__link> get_source </a> </li> <li class=md-nav__item> <a href=#get_sources_skycoord class=md-nav__link> get_sources_skycoord </a> </li> <li class=md-nav__item> <a href=#load_two_epoch_metrics class=md-nav__link> load_two_epoch_metrics </a> </li> <li class=md-nav__item> <a href=#recalc_measurement_pairs_df class=md-nav__link> recalc_measurement_pairs_df </a> </li> <li class=md-nav__item> <a href=#recalc_sources_df class=md-nav__link> recalc_sources_df </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-pipeanalysis-transient-analysis-methods class=md-nav__link> Available PipeAnalysis Transient Analysis Methods </a> <nav class=md-nav aria-label="Available PipeAnalysis Transient Analysis Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eta_v_diagnostic_plot class=md-nav__link> eta_v_diagnostic_plot </a> </li> <li class=md-nav__item> <a href=#plot_two_epoch_pairs class=md-nav__link> plot_two_epoch_pairs </a> </li> <li class=md-nav__item> <a href=#run_eta_v_analysis class=md-nav__link> run_eta_v_analysis </a> </li> <li class=md-nav__item> <a href=#run_two_epoch_analysis class=md-nav__link> run_two_epoch_analysis </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../query/ class=md-nav__link> Query </a> </li> <li class=md-nav__item> <a href=../source/ class=md-nav__link> Source </a> </li> <li class=md-nav__item> <a href=../survey/ class=md-nav__link> Survey </a> </li> <li class=md-nav__item> <a href=../tools/ class=md-nav__link> Tools </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3_7 type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7> Scripts <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Scripts data-md-level=2> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Scripts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../scripts/build_lightcurves/ class=md-nav__link> build_lightcurves </a> </li> <li class=md-nav__item> <a href=../../scripts/find_sources/ class=md-nav__link> find_sources </a> </li> <li class=md-nav__item> <a href=../../scripts/pilot_fields_info/ class=md-nav__link> pilot_fields_info </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Example Notebooks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Example Notebooks" data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Example Notebooks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../notebook-examples/notebooks-overview/ class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../notebook-examples/catalogue-crossmatching-example/ class=md-nav__link> Catalogue Crossmatch </a> </li> <li class=md-nav__item> <a href=../../notebook-examples/planet-hunting-example/ class=md-nav__link> Planet Searching </a> </li> <li class=md-nav__item> <a href=../../notebook-examples/source-search-example/ class=md-nav__link> Query Source Search </a> </li> <li class=md-nav__item> <a href=../../notebook-examples/using-vast-mocs-example/ class=md-nav__link> Using VAST MOCs </a> </li> <li class=md-nav__item> <a href=../../notebook-examples/vast-pipeline-example/ class=md-nav__link> VAST Pipeline Exploration </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Contributing & Developing <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Contributing & Developing" data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Contributing & Developing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/develop/ class=md-nav__link> Developing VAST Tools </a> </li> <li class=md-nav__item> <a href=../../contributing/github/ class=md-nav__link> GitHub Platform </a> </li> <li class=md-nav__item> <a href=../../contributing/tests/ class=md-nav__link> Tests </a> </li> <li class=md-nav__item> <a href=../../contributing/docsdev/ class=md-nav__link> Documentation </a> </li> <li class=md-nav__item> <a href=../../contributing/newepoch/ class=md-nav__link> Adding a New Epoch </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../help_and_acknowledgements/ class=md-nav__link> Help and Acknowledgements </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Reference data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> Changelog </a> </li> <li class=md-nav__item> <a href=../../code_of_conduct/ class=md-nav__link> Code of Conduct </a> </li> <li class=md-nav__item> <a href=../../license/ class=md-nav__link> License </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_4 type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4> Code Reference <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Code Reference" data-md-level=2> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Code Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_4_1 type=checkbox id=__nav_7_4_1> <label class=md-nav__link for=__nav_7_4_1> vast_tools <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=vast_tools data-md-level=3> <label class=md-nav__title for=__nav_7_4_1> <span class="md-nav__icon md-icon"></span> vast_tools </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7_4_1_1 type=checkbox id=__nav_7_4_1_1> <label class=md-nav__link for=__nav_7_4_1_1> bin <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=bin data-md-level=4> <label class=md-nav__title for=__nav_7_4_1_1> <span class="md-nav__icon md-icon"></span> bin </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../reference/bin/build_lightcurves/ class=md-nav__link> build_lightcurves.py </a> </li> <li class=md-nav__item> <a href=../../reference/bin/find_sources/ class=md-nav__link> find_sources.py </a> </li> <li class=md-nav__item> <a href=../../reference/bin/pilot_fields_info/ class=md-nav__link> pilot_fields_info.py </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../reference/moc/ class=md-nav__link> moc.py </a> </li> <li class=md-nav__item> <a href=../../reference/pipeline/ class=md-nav__link> pipeline.py </a> </li> <li class=md-nav__item> <a href=../../reference/query/ class=md-nav__link> query.py </a> </li> <li class=md-nav__item> <a href=../../reference/source/ class=md-nav__link> source.py </a> </li> <li class=md-nav__item> <a href=../../reference/survey/ class=md-nav__link> survey.py </a> </li> <li class=md-nav__item> <a href=../../reference/tools/ class=md-nav__link> tools.py </a> </li> <li class=md-nav__item> <a href=../../reference/utils/ class=md-nav__link> utils.py </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#using-the-pipeline-component class=md-nav__link> Using the Pipeline Component </a> <nav class=md-nav aria-label="Using the Pipeline Component"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#available-pipeline-methods class=md-nav__link> Available Pipeline Methods </a> <nav class=md-nav aria-label="Available Pipeline Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#list_images class=md-nav__link> list_images </a> </li> <li class=md-nav__item> <a href=#list_piperuns class=md-nav__link> list_piperuns </a> </li> <li class=md-nav__item> <a href=#load_run class=md-nav__link> load_run </a> </li> <li class=md-nav__item> <a href=#load_runs class=md-nav__link> load_runs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#pipeanalysis-instances class=md-nav__link> PipeAnalysis Instances </a> </li> <li class=md-nav__item> <a href=#accessing-pipeanalysis-run-data class=md-nav__link> Accessing PipeAnalysis Run Data </a> </li> <li class=md-nav__item> <a href=#available-pipeanalysis-methods class=md-nav__link> Available PipeAnalysis Methods </a> <nav class=md-nav aria-label="Available PipeAnalysis Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#check_for_planets class=md-nav__link> check_for_planets </a> </li> <li class=md-nav__item> <a href=#combine_with_run class=md-nav__link> combine_with_run </a> </li> <li class=md-nav__item> <a href=#create_moc class=md-nav__link> create_moc </a> </li> <li class=md-nav__item> <a href=#filter_by_moc class=md-nav__link> filter_by_moc </a> </li> <li class=md-nav__item> <a href=#get_source class=md-nav__link> get_source </a> </li> <li class=md-nav__item> <a href=#get_sources_skycoord class=md-nav__link> get_sources_skycoord </a> </li> <li class=md-nav__item> <a href=#load_two_epoch_metrics class=md-nav__link> load_two_epoch_metrics </a> </li> <li class=md-nav__item> <a href=#recalc_measurement_pairs_df class=md-nav__link> recalc_measurement_pairs_df </a> </li> <li class=md-nav__item> <a href=#recalc_sources_df class=md-nav__link> recalc_sources_df </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#available-pipeanalysis-transient-analysis-methods class=md-nav__link> Available PipeAnalysis Transient Analysis Methods </a> <nav class=md-nav aria-label="Available PipeAnalysis Transient Analysis Methods"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#eta_v_diagnostic_plot class=md-nav__link> eta_v_diagnostic_plot </a> </li> <li class=md-nav__item> <a href=#plot_two_epoch_pairs class=md-nav__link> plot_two_epoch_pairs </a> </li> <li class=md-nav__item> <a href=#run_eta_v_analysis class=md-nav__link> run_eta_v_analysis </a> </li> <li class=md-nav__item> <a href=#run_two_epoch_analysis class=md-nav__link> run_two_epoch_analysis </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/askap-vast/vast-tools/tree/dev/docs/components/pipeline.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=pipeline>Pipeline<a class=headerlink href=#pipeline title="Permanent link">&para;</a></h1> <p>This class provides methods to load and interact with results from the <a href=https://vast-survey.org/vast-pipeline/ target=_blank>VAST Pipeline</a>. There are ready made functions to:</p> <ul> <li>Load the pipeline outputs into dataframes ready for analysis.</li> <li>Explore individual sources.</li> <li>Run provided transient and variability searches.</li> <li>Check for the Sun, Moon and planets in the pipeline run.</li> <li>Recalculate the <code>sources</code> data after filters have been applied.</li> <li>Create a MOC of the pipeline run.</li> </ul> <div class="admonition warning"> <p class=admonition-title>Warning: Data Access</p> <p>It is assumed that the machine that is running VAST Tools has access to the pipeline output and the images that were used in the pipeline. Refer to the <a href=../../getting_started/configuration/ >Configuration &amp; Data Access</a> page for more information.</p> </div> <h2 id=using-the-pipeline-component>Using the Pipeline Component<a class=headerlink href=#using-the-pipeline-component title="Permanent link">&para;</a></h2> <div class="admonition info"> <p class=admonition-title>Info: VAST Pipeline Example Notebook</p> <p>An example notebook of using the Pipeline component can be found in the example notebooks section <a href=../../notebook-examples/vast-pipeline-example/ >here</a>. Using the pipeline results to crossmatch to external catalogues is also demonstrated in the <a href=../../notebook-examples/catalogue-crossmatching-example/ >catalogue crossmatch example notebook</a>.</p> </div> <p>The first step is to initialise a <code>Pipeline</code> instance from <code>vasttools.pipeline</code>:</p> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>vasttools.pipeline</span> <span class=kn>import</span> <span class=n>Pipeline</span>

<span class=n>pipe</span> <span class=o>=</span> <span class=n>Pipeline</span><span class=p>()</span>
</code></pre></div> </div> <p>If configured correctly, VAST Tools should automatically detected where the Pipeline directory is located on the system. If this is not the case then the variable <code>project_dir</code> can be passed when initialising the instance to define where the pipeline outputs are located. Refer to the <a href=../../getting_started/configuration/ >Configuration &amp; Data Access</a> page for more information.</p> <div class="admonition example"> <p class=admonition-title>Example: Defining the Project Directory</p> <div class=highlight><pre><span></span><code><span class=n>pipe</span> <span class=o>=</span> <span class=n>Pipeline</span><span class=p>(</span><span class=n>project_dir</span><span class=o>=</span><span class=s1>&#39;/path/to/the/pipeline-runs/&#39;</span><span class=p>)</span>
</code></pre></div> </div> <h3 id=available-pipeline-methods>Available Pipeline Methods<a class=headerlink href=#available-pipeline-methods title="Permanent link">&para;</a></h3> <p>The following methods are available with the <code>Pipeline</code> instance.</p> <div class="admonition info"> <p class=admonition-title>Info: Code Reference</p> <p>Each method below has a link to the Code Reference section which provides full details of the method, including the arguments.</p> </div> <h4 id=list_images>list_images<a class=headerlink href=#list_images title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.Pipeline.list_images>Code reference</a>.</p> <p>Provides a list of all the images that have been processed in the pipeline.</p> <div class="admonition example"> <p class=admonition-title>Example</p> <p><div class=highlight><pre><span></span><code><span class=n>pipe</span><span class=o>.</span><span class=n>list_images</span><span class=p>()</span>
</code></pre></div> Output: <div class=highlight><pre><span></span><code> [&#39;VAST_2118+00A_EPOCH01_I_fits&#39;,
 &#39;VAST_2118-06A_EPOCH01_I_fits&#39;,
 &#39;VAST_2118-06A_EPOCH02_I_fits&#39;,
 &#39;VAST_2118-06A_EPOCH03x_I_fits&#39;,
 &#39;VAST_2118-06A_EPOCH05x_I_fits&#39;,
 &#39;VAST_2118-06A_EPOCH06x_I_fits&#39;]
</code></pre></div></p> </div> <h4 id=list_piperuns>list_piperuns<a class=headerlink href=#list_piperuns title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.Pipeline.list_piperuns>Code reference</a>.</p> <p>Provides a list of all the pipeline runs that have been set up in the pipeline.</p> <div class="admonition note"> <p class=admonition-title>Note: Pipeline Runs</p> <p>This works by searching for the created directories in the pipeline output folder. Hence, pipeline runs listed here may not have been successfully completed.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p><div class=highlight><pre><span></span><code><span class=n>pipe</span><span class=o>.</span><span class=n>list_piperuns</span><span class=p>()</span>
</code></pre></div> Output: <div class=highlight><pre><span></span><code>[&#39;S190814bv&#39;,
 &#39;VAST_0127-73A&#39;,
 &#39;VAST_2118-06A_UI&#39;]
</code></pre></div></p> </div> <h4 id=load_run>load_run<a class=headerlink href=#load_run title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.Pipeline.load_run>Code reference</a>.</p> <p>Loads the pipeline run requested returning a <code>vasttools.pipeline.PipeAnalysis</code> instance (see sections below).</p> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Load the pipeline run named <code>pilot_survey</code> <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span> <span class=o>=</span> <span class=n>pipe</span><span class=o>.</span><span class=n>load_run</span><span class=p>(</span><span class=s1>&#39;pilot_survey&#39;</span><span class=p>)</span>
</code></pre></div></p> </div> <h4 id=load_runs>load_runs<a class=headerlink href=#load_runs title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.Pipeline.load_runs>Code reference</a>.</p> <p>Loads multiple pipeline runs that are requested and merges them to return a single <code>vasttools.pipeline.PipeAnalysis</code> instance (see sections below).</p> <div class="admonition warning"> <p class=admonition-title>Warning: Same Pipeline Assumption</p> <p>It is assumed you are loading runs from the same Pipeline instance. If this is not the case then erroneous results may be returned.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Load the two runs <code>pilot_survey</code> and <code>pilot_survey_phase_2</code>. <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span> <span class=o>=</span> <span class=n>pipe</span><span class=o>.</span><span class=n>load_runs</span><span class=p>([</span><span class=s1>&#39;pilot_survey&#39;</span><span class=p>,</span> <span class=s1>&#39;pilot_survey_phase_2&#39;</span><span class=p>])</span>
</code></pre></div></p> </div> <h3 id=pipeanalysis-instances>PipeAnalysis Instances<a class=headerlink href=#pipeanalysis-instances title="Permanent link">&para;</a></h3> <p>A loaded run using the <code>Pipeline.load_run()</code> method is returned as a <code>vasttools.pipeline.PipeAnalysis</code> instance. This object contains the loaded raw data of the pipeline as well has having access to various methods to perform common analysis tasks. The sections below detail what data and methods are available.</p> <h3 id=accessing-pipeanalysis-run-data>Accessing PipeAnalysis Run Data<a class=headerlink href=#accessing-pipeanalysis-run-data title="Permanent link">&para;</a></h3> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis>Code reference</a>.</p> <p>The run data is stored as attributes to the <code>PipeAnalysis</code> object, which are all shown in the table below. This means that to access any of the pieces of pipeline run data, for example <code>sources</code>, the command would be:</p> <div class="admonition example"> <p class=admonition-title>Example: Accessing the Pipeline Data</p> <p>Accessing the <code>source</code> attribute from the <code>PipeAnalysis</code> object stored as <code>my_pipe_run</code>. <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span><span class=o>.</span><span class=n>sources</span>
</code></pre></div> Output:</p> <table> <thead> <tr> <th align=right>id</th> <th align=right>wavg_ra</th> <th align=right>wavg_dec</th> <th align=right>avg_compactness</th> <th align=right>min_snr</th> <th align=right>max_snr</th> <th align=right>wavg_uncertainty_ew</th> <th align=right>wavg_uncertainty_ns</th> <th align=right>avg_flux_int</th> <th align=right>avg_flux_peak</th> <th align=right>max_flux_peak</th> <th align=right>max_flux_int</th> <th align=right>min_flux_peak</th> <th align=right>min_flux_int</th> <th align=right>min_flux_peak_isl_ratio</th> <th align=right>min_flux_int_isl_ratio</th> <th align=right>v_int</th> <th align=right>v_peak</th> <th align=right>eta_int</th> <th align=right>eta_peak</th> <th align=left>new</th> <th align=right>new_high_sigma</th> <th align=right>n_neighbour_dist</th> <th align=right>vs_abs_significant_max_peak</th> <th align=right>m_abs_significant_max_peak</th> <th align=right>vs_abs_significant_max_int</th> <th align=right>m_abs_significant_max_int</th> <th align=right>n_measurements</th> <th align=right>n_selavy</th> <th align=right>n_forced</th> <th align=right>n_siblings</th> <th align=right>n_relations</th> </tr> </thead> <tbody> <tr> <td align=right>1</td> <td align=right>321.973</td> <td align=right>0.699851</td> <td align=right>1.19165</td> <td align=right>50.0035</td> <td align=right>50.0035</td> <td align=right>0.000282565</td> <td align=right>0.000282565</td> <td align=right>17.161</td> <td align=right>14.401</td> <td align=right>14.401</td> <td align=right>17.161</td> <td align=right>14.401</td> <td align=right>17.161</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=left>False</td> <td align=right>0</td> <td align=right>0.0797685</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> </tr> <tr> <td align=right>2</td> <td align=right>323.714</td> <td align=right>-2.60374</td> <td align=right>0.984136</td> <td align=right>35.6238</td> <td align=right>50.4427</td> <td align=right>0.000115396</td> <td align=right>0.000115396</td> <td align=right>14.8353</td> <td align=right>15.056</td> <td align=right>16.293</td> <td align=right>18.188</td> <td align=right>14.278</td> <td align=right>10.097</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0.220432</td> <td align=right>0.0483071</td> <td align=right>34.0201</td> <td align=right>4.77011</td> <td align=left>False</td> <td align=right>0</td> <td align=right>0.0671826</td> <td align=right>4.37252</td> <td align=right>0.131824</td> <td align=right>9.7928</td> <td align=right>0.572105</td> <td align=right>6</td> <td align=right>6</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> </tr> <tr> <td align=right>3</td> <td align=right>322.062</td> <td align=right>-3.65218</td> <td align=right>1.10679</td> <td align=right>28.9505</td> <td align=right>51.573</td> <td align=right>0.00011714</td> <td align=right>0.00011714</td> <td align=right>11.2827</td> <td align=right>10.2657</td> <td align=right>14.492</td> <td align=right>17.725</td> <td align=right>7.602</td> <td align=right>8.53</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0.318601</td> <td align=right>0.320678</td> <td align=right>44.727</td> <td align=right>144.446</td> <td align=left>False</td> <td align=right>0</td> <td align=right>0.0483475</td> <td align=right>18.271</td> <td align=right>0.623699</td> <td align=right>12.2216</td> <td align=right>0.700438</td> <td align=right>6</td> <td align=right>6</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> </tr> <tr> <td align=right>4</td> <td align=right>316.332</td> <td align=right>-2.60898</td> <td align=right>1.11456</td> <td align=right>52.4078</td> <td align=right>64.4311</td> <td align=right>0.000114767</td> <td align=right>0.000114767</td> <td align=right>15.6558</td> <td align=right>14.0617</td> <td align=right>14.497</td> <td align=right>19.35</td> <td align=right>13.364</td> <td align=right>12.002</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0.166578</td> <td align=right>0.0334684</td> <td align=right>35.3403</td> <td align=right>3.70799</td> <td align=left>False</td> <td align=right>0</td> <td align=right>0.0724847</td> <td align=right>0</td> <td align=right>0</td> <td align=right>10.9505</td> <td align=right>0.468742</td> <td align=right>6</td> <td align=right>6</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> </tr> <tr> <td align=right>5</td> <td align=right>323.796</td> <td align=right>1.83018</td> <td align=right>1.0673</td> <td align=right>40.236</td> <td align=right>40.236</td> <td align=right>0.000284353</td> <td align=right>0.000284353</td> <td align=right>15.288</td> <td align=right>14.324</td> <td align=right>14.324</td> <td align=right>15.288</td> <td align=right>14.324</td> <td align=right>15.288</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=left>False</td> <td align=right>0</td> <td align=right>0.0485506</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> <td align=right>1</td> <td align=right>1</td> <td align=right>0</td> <td align=right>0</td> <td align=right>0</td> </tr> <tr> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=left>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> <td align=right>...</td> </tr> </tbody> </table> </div> <div class="admonition info"> <p class=admonition-title>Info: VAST Pipeline Outputs</p> <p>Refer to <a href=https://vast-survey.org/vast-pipeline/outputs/outputs/ target=_blank>this page</a> in the VAST Pipeline documentation for details on the Pipeline outputs.</p> </div> <table> <thead> <tr> <th><strong>Attribute Name</strong></th> <th><strong>Description</strong></th> </tr> </thead> <tbody> <tr> <td><code>associations</code></td> <td>The pipeline output <code>associations.parquet</code> loaded into a pandas dataframe.</td> </tr> <tr> <td><code>images</code></td> <td>The pipeline output <code>images.parqeut</code> loaded into a pandas dataframe.</td> </tr> <tr> <td><code>measurements</code></td> <td>The pipeline output <code>measurements.parquet</code> or <code>measurements.arrow</code> loaded into a pandas dataframe or vaex dataframe, respectively.</td> </tr> <tr> <td><code>relations</code></td> <td>The pipeline output <code>relations.parqeut</code> loaded into a pandas dataframe.</td> </tr> <tr> <td><code>skyregions</code></td> <td>The pipeline output <code>skyregions.parqeut</code> loaded into a pandas dataframe.</td> </tr> <tr> <td><code>sources</code></td> <td>The pipeline output <code>sources.parqeut</code> loaded into a pandas dataframe.</td> </tr> <tr> <td><code>sources_skycoord</code></td> <td>A <code>astropy.coords.SkyCoordinate</code> instance of the all the <code>sources</code> positions for convenience.</td> </tr> </tbody> </table> <div class="admonition info"> <p class=admonition-title>Info: vaex</p> <p>For large pipeline runs, the individual measurements of the run are loaded into a <code>vaex</code> dataframe, instead of using <code>pandas</code>. <code>vaex</code> is a recently developed data analysis package that loads data in an 'out-of-core' context, which means the data is not loaded into memory. This makes the exploration much faster and lightweight, but <code>vaex</code> does have some differences to <code>pandas</code>. It is recommended to refer to the <a href=https://vaex.io/docs/index.html target=_blank><code>vaex</code> documentation</a> if you are new to the package.</p> <p>User warnings will appear when <code>vaex</code> has been used to load data.</p> </div> <h3 id=available-pipeanalysis-methods>Available PipeAnalysis Methods<a class=headerlink href=#available-pipeanalysis-methods title="Permanent link">&para;</a></h3> <p>The following methods are available to the <code>PipeAnalysis</code> instance.</p> <details class=note> <summary>Dev Note</summary> <p>The <code>PipeAnalysis</code> object inherits from <code>vasttools.pipeline.PipeRun</code>, hence, some of the methods are attached to this object in the <a href=../../reference/pipeline/ ><code>Code Reference</code></a> section.</p> </details> <h4 id=check_for_planets>check_for_planets<a class=headerlink href=#check_for_planets title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.check_for_planets>Code reference</a>.</p> <p>Checks to see if any of the planets, including Pluto, the Sun and the Moon, are observable at any time in the pipeline run. A pandas dataframe will be returned containing the positions of found objects. An empty dataframe will be returned if no objects are in the pipeline run.</p> <p>The columns of the returned dataframe are:</p> <ul> <li><code>DATEOBS</code> The date of the observation (image) being checked.</li> <li><code>centre-ra</code> The right ascension coordinate of the image centre in degrees.</li> <li><code>centre-dec</code> The declination coordinate of the image centre in degrees.</li> <li><code>planet</code> The name of the planet.</li> <li><code>ra</code> The right ascension coordinate of the planet location in degrees.</li> <li><code>dec</code> The declination coordinate of the planet location in degrees.</li> <li><code>sep</code> The on-sky separation between the planet location and the image centre in degrees.</li> </ul> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=n>planets</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>check_for_planets</span><span class=p>()</span>
</code></pre></div> </div> <h4 id=combine_with_run>combine_with_run<a class=headerlink href=#combine_with_run title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.combine_with_run>Code reference</a>.</p> <p>Combines the current run with another <code>PipeAnalysis</code> object that has been loaded, i.e. a second pipeline run. It returns a new <code>PipeAnalysis</code> object with the two runs combined.</p> <div class="admonition warning"> <p class=admonition-title>Warning: Same Pipeline Assumption</p> <p>It is assumed you are loading runs from the same Pipeline instance. If this is not the case then erroneous results may be returned.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Combines <code>my_pipe_run</code> with another run defined as <code>my_second_pipe_run</code>. <div class=highlight><pre><span></span><code><span class=n>my_new_pipe_run</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>combine_with_run</span><span class=p>(</span><span class=n>my_second_pipe_run</span><span class=p>)</span>
</code></pre></div></p> </div> <h4 id=create_moc>create_moc<a class=headerlink href=#create_moc title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.create_moc>Code reference</a>.</p> <p>This creates a Multi-Order Coverage map for the area covered by the pipeline run. </p> <div class="admonition warning"> <p class=admonition-title>Warning: Long Processing Time</p> <p>This is not recommended for pipeline runs with a lot of images (&gt; 200) as the process can take a very long time.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=n>my_pipe_run_moc</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>create_moc</span><span class=p>()</span>
</code></pre></div> </div> <h4 id=filter_by_moc>filter_by_moc<a class=headerlink href=#filter_by_moc title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.filter_by_moc>Code reference</a>.</p> <p>Returns a new <code>PipeAnalysis</code> instance that has had all data filtered to only include data of sources that are within a supplied MOC.</p> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Filtering the pipeline run by a MOC defined by <code>my_moc</code>. <div class=highlight><pre><span></span><code><span class=n>my_pipe_run_filtered</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>filter_by_moc</span><span class=p>(</span><span class=n>my_moc</span><span class=p>)</span>
</code></pre></div></p> </div> <h4 id=get_source>get_source<a class=headerlink href=#get_source title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.get_source>Code reference</a>.</p> <p>Fetches a specific source from the pipeline run, and returns a <code>vasttools.source.Source</code> instance. The source is selected by using the ID value.</p> <div class="admonition info"> <p class=admonition-title>Info: A VAST Tools Source</p> <p>A <code>vasttools.source.Source</code> object has the ability to plot lightcurves, postage stamps and to search for images of the source in other surveys. Refer to the <a href=../source/ >Source page</a> of this documentation to learn more about <code>vasttools.source.Source</code> objects.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Seleting a source with ID <code>500</code>. <div class=highlight><pre><span></span><code><span class=n>my_source</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>get_source</span><span class=p>(</span><span class=mi>500</span><span class=p>)</span>
</code></pre></div></p> </div> <h4 id=get_sources_skycoord>get_sources_skycoord<a class=headerlink href=#get_sources_skycoord title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.get_sources_skycoord>Code reference</a>.</p> <p>A convenience function to generate a <code>SkyCoord</code> object of all the sources in the <code>PipeAnalysis.sources</code> attribute. Returns a <code>astropy.coordines.SkyCoord</code> instance.</p> <div class="admonition tip"> <p class=admonition-title>Tip: Custom Source dataframe</p> <p>The method can also generate a SkyCoord from a provided sources dataframe. Check the <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.get_sources_skycoord>Code reference</a> for more details.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=n>sources_skycoord</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>get_sources_skycoord</span><span class=p>()</span>
</code></pre></div> </div> <h4 id=load_two_epoch_metrics>load_two_epoch_metrics<a class=headerlink href=#load_two_epoch_metrics title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeRun.load_two_epoch_metrics>Code reference</a>.</p> <p>By default the raw two-epoch metrics produced by the pipeline are not loaded. This method loads the two-epoch metrics, stored by the pipeline in <code>measurement_pairs.parquet</code> (or <code>measurement_pairs.arrow</code>) and saves them as an attribute to the <code>PipeAnalysis</code> object: <code>PipeAnalysis.measurement_pairs_df</code>. The method also creates a second dataframe that lists all the possible epoch pairs, i.e., all the unique pairs of images that make up the measurement pairs. This is stored as the attribute <code>PipeAnalysis.pairs_df</code>.</p> <div class="admonition warning"> <p class=admonition-title>Warning: vaex</p> <p>For large runs where a <code>measurement_pairs.arrow</code> file has been produced by the pipeline, <code>vaex</code> will be used to load the <code>measurement_pairs</code> dataframe. A user warning will be given when <code>vaex</code> is used.</p> </div> <div class="admonition info"> <p class=admonition-title>Info: Two Epoch Metrics</p> <p>Refer to <a href=https://vast-survey.org/vast-pipeline/design/sourcestats/#two-epoch-metrics target=_blank>this page</a> in the VAST Pipeline documentation to learn more about the two-epoch metrics.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Loading the two-epoch metrics. <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span><span class=o>.</span><span class=n>load_two_epoch_metrics</span><span class=p>()</span>
</code></pre></div> Which will create the following attributes: <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span><span class=o>.</span><span class=n>measurement_pairs_df</span>
<span class=n>my_pipe_run</span><span class=o>.</span><span class=n>pairs_df</span>
</code></pre></div></p> </div> <h4 id=recalc_measurement_pairs_df>recalc_measurement_pairs_df<a class=headerlink href=#recalc_measurement_pairs_df title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.recalc_measurement_pairs_df>Code reference</a>.</p> <div class="admonition warning"> <p class=admonition-title>Warning: Run Time &amp; Memory</p> <p>Beware that for large pipeline runs the recalculation can take some time to complete and use up considerable memory. On a shared instance, e.g. a Jupyter Hub environment, the admin may need to be consulted to allow for enough memory access.</p> </div> <p>A method to recalculate the measurement pairs dataframe using a provided measurements dataframe that is assumed to have been edited. For example, some measurements could have been removed or the fluxes could have been changed to corrected values.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>The result of this method can be used with <a href=#recalc_sources_df><code>recalc_sources_df</code></a> to update the significant <code>vs</code> and <code>m</code> columns in the sources dataframe.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=n>new_measurement_pairs</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>recalc_measurement_pairs_df</span><span class=p>(</span><span class=n>my_filtered_measurements</span><span class=p>)</span>
</code></pre></div> </div> <h4 id=recalc_sources_df>recalc_sources_df<a class=headerlink href=#recalc_sources_df title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.recalc_sources_df>Code reference</a>.</p> <div class="admonition warning"> <p class=admonition-title>Warning: Run Time &amp; Memory</p> <p>Beware that for large pipeline runs the recalculation can take some time to complete and use up considerable memory. On a shared instance, e.g. a Jupyter Hub environment, the admin may need to be consulted to allow for enough memory access.</p> </div> <p>This method recalculates the <code>sources</code> dataframe using the provided <code>measurements</code> dataframe. In particular, all the columns that are averages, counts or the variability metrics are recalculated. It is useful for cases where measurements are filtered out of the original measurements dataframe, or have fluxes changed, and hence the <code>source</code> dataframe becomes out of sync. Returns a pandas dataframe.</p> <div class="admonition tip"> <p class=admonition-title>Tip: Changed Measurement Fluxes</p> <p>If the measurement fluxes have been changed then a recalculated measurement pairs dataframe should be provided in order to calculate the correct new values of the significant <code>vs</code> and <code>m</code> columns. A recalculated pairs dataframe can be obtained from the <a href=#recalc_measurement_pairs_df><code>recalc_measurement_pairs_df</code></a> detailed on this page, and can be supplied using the <code>measurement_pairs_df</code> argument. See the example section below on how to supply the dataframe.</p> <p>If no measurement pairs dataframe is provided then a filtered measurement pairs dataframe will be used to calculate the new columns with the original fluxes.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning: Not Recalculated</p> <p>Two metrics are not re-calculated:</p> <ul> <li><code>new</code></li> <li><code>new_source_high_sigma</code></li> </ul> <p>As these metrics are too complex to recalculate in this environment.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p><div class=highlight><pre><span></span><code><span class=n>new_sources_df</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>recalc_sources_df</span><span class=p>(</span><span class=n>my_filtered_measurements</span><span class=p>)</span>
</code></pre></div> Or with a corrected measurement pairs dataframe: <div class=highlight><pre><span></span><code><span class=n>new_measurement_pairs</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>recalc_measurement_pairs_df</span><span class=p>(</span><span class=n>my_filtered_measurements</span><span class=p>)</span>

<span class=n>new_sources_df</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>recalc_sources_df</span><span class=p>(</span>
    <span class=n>my_filtered_measurements</span><span class=p>,</span> <span class=n>measurement_pairs_df</span><span class=o>=</span><span class=n>new_measurement_pairs</span><span class=p>)</span>
</code></pre></div> The new sources could then be assigned to the pipeline run if desired: <div class=highlight><pre><span></span><code><span class=n>my_pipe_run</span><span class=o>.</span><span class=n>sources</span> <span class=o>=</span> <span class=n>new_sources_df</span>
</code></pre></div></p> </div> <h3 id=available-pipeanalysis-transient-analysis-methods>Available PipeAnalysis Transient Analysis Methods<a class=headerlink href=#available-pipeanalysis-transient-analysis-methods title="Permanent link">&para;</a></h3> <p>The following methods are designed to perform common transient search analyses and plots on the loaded pipeline run data, including the production of useful plots.</p> <div class="admonition info"> <p class=admonition-title>Info: Variability Statistics</p> <p>Refer to <a href=https://vast-survey.org/vast-pipeline/design/sourcestats/#variability-statistics>this page</a> in the VAST Pipeline documentation to learn more about the variability metrics the pipeline provides.</p> </div> <h4 id=eta_v_diagnostic_plot>eta_v_diagnostic_plot<a class=headerlink href=#eta_v_diagnostic_plot title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.eta_v_diagnostic_plot>Code reference</a>.</p> <p>Produces a diagnostic plot using the Î· and V metrics as described in <a href=https://ui.adsabs.harvard.edu/abs/2019A%26C....27..111R/abstract>Rowlinson et al., 2019</a>. Returns a <code>matplotlib.pyplot.figure</code> instance.</p> <div class="admonition example"> <p class=admonition-title>Example</p> <div class=highlight><pre><span></span><code><span class=n>diag_plot</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>eta_v_diagnostic_plot</span><span class=p>()</span>
</code></pre></div> </div> <details class=example> <summary>Example Plot</summary> <p><div class=lightgallery><a data-sub-html="Eta-v diagnostic plot." href=../../img/eta_v_diagnostic_plot.png><img alt="Eta-v diagnostic plot." loading=lazy src=../../img/eta_v_diagnostic_plot.png></a></div></p> </details> <h4 id=plot_two_epoch_pairs>plot_two_epoch_pairs<a class=headerlink href=#plot_two_epoch_pairs title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.plot_two_epoch_pairs>Code reference</a>.</p> <p>Produce a two-epoch metric plot of the <code>m</code> and <code>vs</code> values of the requested pair ID (i.e. the pair of images). The pair ID can be found in the <code>pairs_df</code> attribute after <a href=#load_two_epoch_metrics><code>load_two_epoch_metrics()</code></a> has been used. There are options to change the <code>m_min</code> and <code>vs_min</code> thresholds and to switch to using integrated flux instead of the peak flux (default). The plots can be returned as a <code>matplotlib.pyplot.figure</code> instance or a <code>bokeh.plotting.figure</code> instance. Also available are two styles, style <code>a</code> follows the plot style found in <a href=https://ui.adsabs.harvard.edu/abs/2016ApJ...818..105M/abstract>Mooley et al., 2016</a> where as style <code>b</code> follows the style found in <a href=https://ui.adsabs.harvard.edu/abs/2019MNRAS.490.4024R/abstract>Radcliffe et al., 2019</a>.</p> <div class="admonition tip"> <p class=admonition-title>Tip: Query String</p> <p>This method has the ability to pass a query string. See the tip in <a href=#run_eta_v_analysis><code>run_eta_v_analysis</code></a> for details.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning: Bokeh Output</p> <p>Remember that the <code>output_notebook</code> must be initialised in order to view any bokeh output in a Jupyter Notebook environment. <div class=highlight><pre><span></span><code><span class=kn>from</span> <span class=nn>bokeh.io</span> <span class=kn>import</span> <span class=n>output_notebook</span>

<span class=n>output_notebook</span><span class=p>()</span>
</code></pre></div></p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Plot the two epoch pairs for pair with ID 14. <div class=highlight><pre><span></span><code><span class=n>two_epoch_plot</span> <span class=o>=</span> <span class=n>my_pipe_run</span><span class=o>.</span><span class=n>plot_two_epoch_pairs</span><span class=p>(</span><span class=mi>14</span><span class=p>)</span>
</code></pre></div></p> </div> <details class=example> <summary>Example Plot Style a</summary> <p><div class=lightgallery><a data-sub-html="Two-epoch metrics plot (style a)." href=../../img/two-epoch-style-a.png><img alt="Two-epoch metrics plot (style a)." loading=lazy src=../../img/two-epoch-style-a.png></a></div></p> </details> <details class=example> <summary>Example Plot Style b</summary> <p><div class=lightgallery><a data-sub-html="Two-epoch metrics plot (style b)." href=../../img/two-epoch-style-b.png><img alt="Two-epoch metrics plot (style b)." loading=lazy src=../../img/two-epoch-style-b.png></a></div></p> </details> <h4 id=run_eta_v_analysis>run_eta_v_analysis<a class=headerlink href=#run_eta_v_analysis title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.run_eta_v_analysis>Code reference</a>.</p> <p>Method to perform the Î·-V transient search method as described in <a href=https://ui.adsabs.harvard.edu/abs/2019A%26C....27..111R/abstract>Rowlinson et al., 2019</a>, to the sigma level provided for each metric. It uses the Î· and V metrics defined in the <code>sources</code> dataframe. The distributions of Î· and V in the <code>sources</code> dataframe are fitted with a Gaussian, which is then used to calculate the requested sigma value for each parameter. Any sources that have Î· and V values above the calculated thresholds are considered as variable candidates.</p> <p>The method returns a tuple containing:</p> <ul> <li>Î· cutoff value,</li> <li>the V cutoff value,</li> <li>dataframe of candidates,</li> <li>candidates plot,</li> <li>the diagnostic plot (optional).</li> </ul> <p>The Î· and V cutoff values are the calculated values for the provided sigma limit. The candidates dataframe contains any sources that exceed both the Î· and V thresholds (found in the top right-hand quadrant of the plot). The candidates plot can either be a <code>matplotlib.pyplot.figure</code> or <code>bokeh.layouts.gridplot</code> instance.</p> <div class="admonition tip"> <p class=admonition-title>Tip: Query String</p> <p>This method allows the user to pass a <code>query</code> to the method which is a string representation of a query that is used with the <a href=https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html target=_blank><code>pandas.DataFrame.query</code></a> method on the <code>sources</code> dataframe.</p> <p>For example, using the column names of the <code>sources</code> dataframe that can be found in the VAST Pipeline documentation <a href=https://vast-survey.org/vast-pipeline/outputs/coldesc/#sources target=_blank>here</a>, the following query could be defined: <div class=highlight><pre><span></span><code><span class=n>my_query_string</span> <span class=o>=</span> <span class=p>(</span>
    <span class=s2>&quot;n_measurements &gt;= 3 &quot;</span>
    <span class=s2>&quot;&amp; n_relations == 0 &quot;</span>
    <span class=s2>&quot;&amp; min_snr &gt;= 7.0&quot;</span>
<span class=p>)</span>
</code></pre></div> Which translates to asking for sources that:</p> <ul> <li>have 3 or more measurements,</li> <li>have no relations,</li> <li>and have a minimum SNR greater of equal to 7.</li> </ul> <p>This is useful in order to dynamically apply filters rather than permenently filtering the sources dataframe.</p> <p>It is passed to the method using the keyword argument <code>query</code>: <div class=highlight><pre><span></span><code><span class=n>eta_thresh</span><span class=p>,</span> <span class=n>v_thresh</span><span class=p>,</span> <span class=n>eta_v_candidates</span><span class=p>,</span> <span class=n>plot</span> <span class=o>=</span> <span class=n>my_run</span><span class=o>.</span><span class=n>run_eta_v_analysis</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>,</span> <span class=n>query</span><span class=o>=</span><span class=n>my_query_string</span><span class=p>)</span>
</code></pre></div> Check the <a href=../../reference/pipeline/ ><code>Code Reference</code></a> section of this documentation for full details of the arguments.</p> </div> <div class="admonition warning"> <p class=admonition-title>Warning: Bokeh Slow Down</p> <p>A bokeh plot with thousands of datapoints from large pipeline runs may cause the notebook to suffer from slowdown.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Run the Î·-V process using threshold sigma values of 1.0 for each metric. <div class=highlight><pre><span></span><code><span class=n>eta_thresh</span><span class=p>,</span> <span class=n>v_thresh</span><span class=p>,</span> <span class=n>eta_v_candidates</span><span class=p>,</span> <span class=n>plot</span> <span class=o>=</span> <span class=n>my_run</span><span class=o>.</span><span class=n>run_eta_v_analysis</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=mf>1.0</span><span class=p>)</span>
</code></pre></div></p> </div> <details class=example> <summary>Example Plot</summary> <p><div class=lightgallery><a data-sub-html="Î·-V transient plot." href=../../img/eta-v-transient-plot.png><img alt="Î·-V transient plot." loading=lazy src=../../img/eta-v-transient-plot.png></a></div></p> </details> <h4 id=run_two_epoch_analysis>run_two_epoch_analysis<a class=headerlink href=#run_two_epoch_analysis title="Permanent link">&para;</a></h4> <p><span class=twemoji><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 384 512"><path d="M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"/></svg></span> <a href=../../reference/pipeline/#vasttools.pipeline.PipeAnalysis.run_two_epoch_analysis>Code reference</a>.</p> <p>Method to perform the two epoch analysis as detailed in <a href=https://ui.adsabs.harvard.edu/abs/2016ApJ...818..105M/abstract>Mooley et al., 2016</a> to the provided <code>m</code> and <code>vs</code> threshold values. The entire <code>measurement_pairs_df</code> is analysed for any pair that exceed the two provided thresholds.</p> <p>The method returns a tuple containing two dataframes: the candidate sources and pairs. The candidate sources are the unique sources that have at least one measurement pair that exceed the threshold. The candidate pairs are all the measurement pairs that exceed the provided thresholds.</p> <div class="admonition tip"> <p class=admonition-title>Tip: Query String</p> <p>This method has the ability to pass a query string. See the tip in <a href=#run_eta_v_analysis><code>run_eta_v_analysis</code></a> for details.</p> </div> <div class="admonition example"> <p class=admonition-title>Example</p> <p>Run the two-epoch process with thresholds of <code>v &gt;= 4.3</code> and <code>m &gt;= 0.26</code>. <div class=highlight><pre><span></span><code><span class=n>two_epoch_candidate_sources</span><span class=p>,</span> <span class=n>two_epoch_candidate_pairs</span> <span class=o>=</span> <span class=n>my_run</span><span class=o>.</span><span class=n>run_two_epoch_analysis</span><span class=p>(</span><span class=mf>4.3</span><span class=p>,</span> <span class=mf>0.26</span><span class=p>)</span>
</code></pre></div></p> </div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 7, 2021</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">July 26, 2021</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../mocs/ class="md-footer__link md-footer__link--prev" aria-label="Previous: MOCs" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> MOCs </div> </div> </a> <a href=../query/ class="md-footer__link md-footer__link--next" aria-label="Next: Query" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Query </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 - 2025 Vast Development Team, University of Sydney - all right reserved </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/askap-vast/vast-tools target=_blank rel=noopener title="vast-pipeline source on GitHub" class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://vast-survey.org target=_blank rel=noopener title=vast-survey.org class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.sections"], "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.b1047164.min.js></script> <script src=../../theme/js/extra.min.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script>
    var elements = document.getElementsByClassName("lightgallery");
    for(var i=0; i<elements.length; i++) {
       lightGallery(elements[i]);
    }
    </script> </body> </html>